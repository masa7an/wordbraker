# Word Breaker 実装チェックリスト

## フェーズ1: 基本構造 ✅ 完了

### 1.1 プロジェクトセットアップ
- [x] 要件定義書作成
- [x] プロジェクト構造設計
- [x] requirements.txt作成
- [x] config.py作成（定数管理）
- [x] 英単語データJSON変換（69語）
- [x] README.md作成
- [x] ディレクトリ構造作成
- [x] run.bat作成（仮想環境なし対応）

### 1.2 基本ファイル作成
- [x] main.py（エントリーポイント）
- [x] game.py（メインゲームループ）
- [x] states/（ゲーム状態管理 - game.py内で実装）
- [x] entities/（ゲーム要素）
- [x] systems/（システム）

---

## フェーズ2: エンティティ実装 ✅ 完了

### 2.1 基本エンティティ
- [x] entities/ball.py（ボール）
  - [x] 初期化
  - [x] 移動処理
  - [x] 反射処理（壁・ブロック・パドル）
  - [x] 描画
  - [x] 速度調整（パドル反射時+1、壁・ブロック反射時20%減衰）
- [x] entities/paddle.py（パドル）
  - [x] 初期化
  - [x] マウス追従
  - [x] ゲームパッド対応（十字キー + アナログスティック）
  - [x] 描画（移動方向に応じた傾き表示）
- [x] entities/block.py（ブロック）
  - [x] 正解ブロック（HP: 2、2ヒットで破壊）
  - [x] 不正解ブロック（無敵）
  - [x] 描画（HP残り1の時は強調表示）
  - [x] 破壊判定
  - [x] ハードモード対応（正解ブロックも赤色表示）
- [x] entities/door.py（扉）
  - [x] 初期化
  - [x] ロック/アンロック状態
  - [x] 描画

---

## フェーズ3: システム実装 ✅ 完了

### 3.1 当たり判定システム
- [x] systems/collision.py
  - [x] ボール-ブロック判定（正確な当たり方向判定）
  - [x] ボール-パドル判定（移動方向考慮）
  - [x] ボール-扉判定
  - [x] ボール-壁判定

### 3.2 スコア管理システム
- [x] systems/score_manager.py
  - [x] スコア計算
  - [x] コンボ管理（3回連続で×1.2）
  - [x] ノーミス判定（×1.2 + "PERFECT!!"表示）
  - [x] スコア表示
  - [x] ライフ管理

### 3.3 単語管理システム
- [x] systems/word_manager.py
  - [x] JSON読み込み
  - [x] 単語選択ロジック
  - [x] 再出題制御（ミス単語の再出題）
  - [x] 学習制御アルゴリズム（新出語制限: 最大5語/ステージ）

### 3.4 音声管理システム
- [x] systems/sound_manager.py
  - [x] 音声ファイル読み込み
  - [x] ボール反射音（Bounce_sound.wav）
  - [x] 正解ブロック破壊音（Correct_sound.wav）
  - [x] ステージクリア音（CLEAR.wav）

---

## フェーズ4: ゲーム状態実装 ✅ 完了

### 4.1 状態管理（game.py内で実装）
- [x] TITLE（タイトル画面）
  - [x] タイトル表示
  - [x] スタートボタン（クリック/Aボタン）
- [x] STAGE_START（ステージ開始）
  - [x] 問題表示（ID + 単語）
  - [x] ブロック配置
  - [x] ボール発射待ち
- [x] PLAYING（プレイ中）
  - [x] ゲームループ
  - [x] エンティティ更新
  - [x] 当たり判定
  - [x] UI表示（スコア、ライフ、タイマー、コンボ）
- [x] STAGE_CLEAR（ステージクリア）
  - [x] クリア表示
  - [x] 待機時間（1.5秒）
  - [x] 次ステージ遷移
- [x] RESULT（リザルト画面）
  - [x] スコア表示
  - [x] PERFECT!!表示（ノーミス時）
  - [x] 選択肢表示（Hキー: ハードモード再挑戦、クリック: 通常モード最初から、Esc: 終了）
- [x] GAME_OVER（ゲームオーバー）
  - [x] ゲームオーバー表示
  - [x] スコア表示
  - [x] コンティニューボタン（クリック/Aボタン）

---

## フェーズ5: ゲームロジック統合 ✅ 完了

### 5.1 メインゲームループ
- [x] game.py
  - [x] 状態遷移管理
  - [x] イベント処理（マウス、キーボード、ゲームパッド）
  - [x] 更新処理
  - [x] 描画処理

### 5.2 ライフシステム
- [x] ライフ管理（初期10）
- [x] ボール落下処理（ライフ-1、即リスポーン）
- [x] ゲームオーバー判定

### 5.3 ステージ管理
- [x] ステージ進行（10ステージ）
- [x] ステージクリア判定
- [x] 全ステージクリア処理

---

## フェーズ6: UI/UX実装 ✅ 完了

### 6.1 UI要素
- [x] スコア表示（左上）
- [x] タイマー表示（右上）
- [x] 問題文表示（上部中央、ID + 単語）
- [x] ライフ表示（左上）
- [x] コンボ表示（左上、コンボ時のみ）
- [x] ハードモード表示（右上、ハードモード時のみ）

### 6.2 演出
- [x] 正解ブロック1ヒット時（色変更、太字、黄色枠線）
- [x] 不正解ブロック命中時（音のみ）
- [x] クリア演出（音 + 表示）
- [x] ゲームオーバー演出

---

## フェーズ7: 学習制御ロジック ✅ 完了

### 7.1 再出題制御
- [x] 不正解選択肢ヒット記録
- [x] ミス単語の再出題
- [x] 出題頻度制御アルゴリズム

### 7.2 新出語制限
- [x] 1ステージ最大5語制限
- [x] 復習語の混在

---

## フェーズ8: 入力デバイス対応 ✅ 完了

### 8.1 マウス操作
- [x] パドル移動（マウス位置追従）
- [x] ボール発射（クリック）

### 8.2 ゲームパッド操作
- [x] 十字キー対応（左右移動）
- [x] アナログスティック対応（左スティックX軸）
- [x] Aボタン対応（ボール発射、各種アクション）
- [x] デッドゾーン処理（0.1）
- [x] 入力優先順位（スティック > 十字キー > マウス）

### 8.3 キーボード操作
- [x] Hキー（ハードモード切り替え）
- [x] Escキー（終了）

---

## フェーズ9: 追加機能 ✅ 完了

### 9.1 ハードモード
- [x] ハードモードフラグ管理
- [x] 正解ブロックも赤色表示（見分けがつかない）
- [x] Hキーで切り替え（いつでも）
- [x] リザルト画面でハードモード再挑戦

### 9.2 ブロックHPシステム
- [x] 正解ブロックHP: 2（2ヒットで破壊）
- [x] 1ヒット時視覚的フィードバック（色変更、太字、黄色枠線）

### 9.3 難易度調整
- [x] ボール速度調整（初期40%減、その後20%増）
- [x] パドルサイズ調整（20%増）
- [x] ブロック間隔調整（30px）
- [x] パドル反射時速度増加（+1）
- [x] 壁・ブロック反射時速度減衰（20%減）

### 9.4 表示調整
- [x] IDナンバー表示（グレー、小さい文字、お題の左側）
- [x] 問題表示の改善（ID=XX 形式）

---

## フェーズ10: テスト・調整 ✅ 完了

### 10.1 動作確認
- [x] 基本動作確認
- [x] 当たり判定確認
- [x] スコア計算確認
- [x] 状態遷移確認
- [x] ゲームパッド動作確認

### 10.2 難易度調整
- [x] ボール速度調整
- [x] ブロック配置調整
- [x] パドルサイズ調整
- [x] ブロック間隔調整

### 10.3 バグ修正
- [x] 日本語文字化け修正（フォント動的読み込み）
- [x] ブロック表示不具合修正
- [x] ボール発射不具合修正
- [x] ブロック衝突時のワープ修正
- [x] ゲームパッド十字キー離した時の位置維持修正

---

## 実装済み機能一覧

### コア機能
- ✅ ゲームループ
- ✅ エンティティ管理（ボール、パドル、ブロック、扉）
- ✅ 当たり判定システム
- ✅ スコア・コンボシステム
- ✅ ライフシステム
- ✅ ステージ管理（10ステージ）
- ✅ 学習制御ロジック（再出題、新出語制限）

### 入力対応
- ✅ マウス操作
- ✅ ゲームパッド（十字キー + アナログスティック）
- ✅ キーボード（Hキー、Escキー）

### 追加機能
- ✅ ハードモード
- ✅ ブロックHPシステム（2ヒット）
- ✅ 音声システム
- ✅ 各種難易度調整

### データ
- ✅ 英単語データ（69語、JSON形式）

---

## 実装状況サマリー

**完了率: 100%** ✅

すべての基本機能が実装済みです。第1フェーズ（Pygame版）は完了しています。

---

## 次のフェーズ（予定）

### フェーズ2: Web移植
- [ ] Web対応（pygbag等を検討）
- [ ] ブラウザ対応
- [ ] モバイル対応

---

**最終更新**: 2024年（第1フェーズ完了時）
**バージョン**: 1.0（Pygame版）
